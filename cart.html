<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utarify Book Rental</title>
    <!-- fontawesome cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- bootstrap css -->
    <link rel = "stylesheet" href = "bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <!-- custom css -->
    <link rel = "stylesheet" href = "css/main.css">
</head>
<body>
    
    <!-- navbar -->
    <nav class = "navbar navbar-expand-lg navbar-light bg-white py-4 fixed-top">
        <div class = "container">
            <a class = "navbar-brand d-flex justify-content-between align-items-center order-lg-0" href = "index.html">
                <img src = "images/site-logo.png" alt = "site icon">
                <span class = "text-uppercase fw-lighter ms-2">UTARIFY BOOK RENTAL</span>
            </a>

            <div class = "order-lg-2 nav-btns">
                <button type = "button" class = "btn position-relative">
                    <a href="#" style="color: black;">
                        <i class = "fa fa-shopping-cart"></i>
                    </a>
                </button>
                <button type = "button" class = "btn position-relative">
                    <a href="login.html" style="color: black;">
                        <i class = "fa fa-user"></i>
                    </a>
                </button>
            </div>

            <button class = "navbar-toggler border-0" type = "button" data-bs-toggle = "collapse" data-bs-target = "#navMenu">
                <span class = "navbar-toggler-icon"></span>
            </button>

            <div class = "collapse navbar-collapse order-lg-1" id = "navMenu">
                <ul class = "navbar-nav mx-auto text-center">
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "#header">home</a>
                    </li>
                    <li class = "nav-item px-2 py-2 border-0">
                        <a class = "nav-link text-uppercase text-dark" href = "browse.html">Browse</a>
                    </li>
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "blog.html">blogs</a>
                    </li>
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "contact.html">Contact Us</a>
                    </li>
                </ul>
                <span id="userEmail" class="nav-link text-uppercase text-dark"></span>

            </div>
        </div>
    </nav>
    <!-- end of navbar -->

            <!--content-->
            <section id="cart-page" class="py-5 mt-5">
                    <div class="container mt-5">
                        <div class="row d-flex justify-content-center">
                            <div class="col-12 text-center">
                                <h1 class="mb-3">Shopping cart</h1>
                            </div>
                            
                            <div class="row">
                                    
                                    <div class="col-md-8 text-end">Book title</div>
                                    <div class="col-md-3 text-center">Price (RM) </div>
                                    <div class="col-md-1 text-center">Operation</div>
                                </div>
                            <div class="list-group" id="cart-list">
                                <div class="row d-flex list-group-item">
                                    <div class="col-md-3 line-center" style="height: 200px;">
                                        <img src="images/Children/c1.jpg" style="height: 100%;" alt=""/>
                                    </div>
                                    <div class="col-md-5 text-end">
                                        Goth Girl and the Wuthering Fright
                                        </div>
                                    <div class="col-md-3 text-center" >
                                        <input type="text" class="form-control" value="123"/>
                                    </div>
                                    <div class="col-md-1 text-center"><button type="button" class="btn btn-danger">Delete</button></div>
                                </div>

                            </div>
                            </div>
                            <div class="d-flex col-md-offset-7 col-md-5" style="padding: 30px;">
                                <button class="col-md-6 btn-primary btn-block me-3" onclick="location.href = 'index.html'">
                                    Continue Shopping
                                </button>
                                <button class="col-md-6 btn-success btn-block" onclick="placeOrder()">
                                    Place order
                                </button>
                                </div>
                            </div>
                        </div>
                    </div>                                    
                </div>
            </section>

    <!-- footer -->
    <footer class = "bg-dark py-5">
        <div class = "container">
            <div class = "row text-white g-4">
                <div class = "col-md-6 col-lg-3">
                    <a class = "text-uppercase text-decoration-none brand text-white" href = "index.html">Introduction</a>
                    <p class = "text-white text-muted mt-3">Welcome to Utarify Book Store, where a world of knowledge awaits every student!</p>
                </div>

                <div class = "col-md-6 col-lg-3">
                    <h5 class = "fw-light">Links</h5>
                    <ul class = "list-unstyled">
                        <li class = "my-3">
                            <a href = "#" class = "text-white text-decoration-none text-muted">
                                <i class = "fas fa-chevron-right me-1"></i> Home
                            </a>
                        </li>
                        <li class = "my-3">
                            <a href = "#" class = "text-white text-decoration-none text-muted">
                                <i class = "fas fa-chevron-right me-1"></i> Collection
                            </a>
                        </li>
                        <li class = "my-3">
                            <a href = "#" class = "text-white text-decoration-none text-muted">
                                <i class = "fas fa-chevron-right me-1"></i> Blogs
                            </a>
                        </li>
                        <li class = "my-3">
                            <a href = "#" class = "text-white text-decoration-none text-muted">
                                <i class = "fas fa-chevron-right me-1"></i> FAQ (Frequent Asked Question)
                            </a>
                        </li>
                        <li class = "my-3">
                            <a href = "#" class = "text-white text-decoration-none text-muted">
                                <i class = "fas fa-chevron-right me-1"></i> Contact Us
                            </a>
                        </li>
                    </ul>
                </div>


                <div class = "col-md-6 col-lg-3">
                    <h5 class = "fw-light mb-3">Follow Us</h5>
                    <div>
                        <ul class = "list-unstyled d-flex">
                            <li>
                                <a href = "#" class = "text-white text-decoration-none text-muted fs-4 me-4">
                                    <i class = "fab fa-facebook-f"></i>
                                </a>
                            </li>
                            <li>
                                <a href = "#" class = "text-white text-decoration-none text-muted fs-4 me-4">
                                    <i class = "fab fa-twitter"></i>
                                </a>
                            </li>
                            <li>
                                <a href = "#" class = "text-white text-decoration-none text-muted fs-4 me-4">
                                    <i class = "fab fa-instagram"></i>
                                </a>
                            </li>
                            <li>
                                <a href = "#" class = "text-white text-decoration-none text-muted fs-4 me-4">
                                    <i class = "fab fa-pinterest"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- end of footer -->




    <!-- jquery -->
    <script src = "js/jquery-3.6.0.js"></script>
    <!-- isotope js -->
    <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.js"></script>
    <!-- bootstrap js -->
    <script src = "bootstrap-5.0.2-dist/js/bootstrap.min.js"></script>
    <!-- custom js -->
    <script src = "js/script.js"></script>

    <script>
        function displayCartItems() {
            var cartList = document.getElementById("cart-list"); // Assuming you have an element with id="cart-list"
            var totalAmount = 0; // Initialize totalAmount variable

            // Clear any existing content in the cart list
            cartList.innerHTML = '';
        
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                var value = localStorage.getItem(key);
                var item = value.split(',');
                console.log(item);
        
                var itemHtml = `
                    <div class="row d-flex list-group-item">
                        <div class="col-md-3 line-center" style="height: 200px;">
                            <img src="${item[0]}" style="height: 100%;" alt=""/>
                        </div>
                        <div class="col-md-5 text-end">${key}</div>
                        <div class="col-md-3 text-center">
                            ${item[1]}
                        </div>
                        <div class="col-md-1 text-center">
                            <button type="button" class="btn btn-danger" 
                                style="background-color:#dc3545; color:white"
                                onclick="removeFromCart('${key}')">Delete</button>
                        </div>
                    </div>
                `;
        
                cartList.innerHTML += itemHtml;
                        // Update totalAmount
                totalAmount += parseFloat(item[1]);

            }
                    // Display totalAmount at the end
                var totalHtml = `
                <div class="row d-flex list-group-item">
                    <div class="col-md-8 text-end fw-bold">Total Amount:</div>
                    <div class="col-md-4 text-center fw-bold"> ${totalAmount.toFixed(2)}</div>
                </div>
            `;

            cartList.innerHTML += totalHtml;
        }
        
        function removeFromCart(title) {
            localStorage.removeItem(title);
            displayCartItems(); // Refresh the displayed cart items after removal
        }
        
        // Call displayCartItems() to initially display the cart items
        displayCartItems();

        function placeOrder(){
            if (localStorage.length > 0){
                localStorage.clear();
                location.href = 'placeOrder.html'; // Replace with your first page URL
            }
        }
        
    </script>
</body>
</html>